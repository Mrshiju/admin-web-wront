webpackJsonp([95],{U7WJ:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("BO1k"),i=e.n(l),n={name:"A",data:function(){return{sum:0,index:0,pageSize:30,pageNum:1,checkIn:!0,loading:!1,tableData:[],totalPage:1e3,userName:"",cuList:[],ctList:[],cmList:[],modifyData:{visible:!1,id:"",cmgateway:"",cugateway:"",ctgateway:"",memo:""},ids:"",bulkChangeData:{visible:!1,cm:"",cu:"",ct:""},operList:[{label:"中国移动",value:1},{label:"中国联通",value:2},{label:"中国电信",value:3}],beforeList:[],afterList:[],bulkChange2Data:{visible:!1,oper:"",beforeBatGW:"",beforeBatGWName:"",afterBatGW:"",afterBatGWName:"",memo:""}}},methods:{handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){var a=this;this.tableData=[],this.checkIn=!0,this.loading=!0;var t=this;this.postRequest("admin/listClientGwScene",{userName:this.userName}).then(function(e){t.tableData=[],t.loading=!1,a.index=Number(e.data.data.page.pageNum-1)*Number(e.data.data.page.pageSize)+1,t.sum=e.data.data.page.totalCount;var l=!0,n=!1,r=void 0;try{for(var s,o=i()(e.data.data.data);!(l=(s=o.next()).done);l=!0){var u=s.value;t.tableData.push({id:u.id,index:t.index,userName:u.userName,cmgatewayname:u.cmgatewayname,cugatewayname:u.cugatewayname,ctgatewayname:u.ctgatewayname,creater:u.creater,createtime:u.createtime,modifier:u.modifier,modifytime:u.modifytime}),t.index++}}catch(a){n=!0,r=a}finally{try{!l&&o.return&&o.return()}finally{if(n)throw r}}})},modify:function(a){var t=this;this.postRequest("admin/editClientGwScene",{id:a.id}).then(function(a){t.cmList=[],t.cuList=[],t.ctList=[];var e=!0,l=!1,n=void 0;try{for(var r,s=i()(a.data.data.cuList);!(e=(r=s.next()).done);e=!0){var o=r.value;t.cuList.push({label:o.gatewayname,value:o.gateway})}}catch(a){l=!0,n=a}finally{try{!e&&s.return&&s.return()}finally{if(l)throw n}}var u=!0,c=!1,b=void 0;try{for(var m,f=i()(a.data.data.ctList);!(u=(m=f.next()).done);u=!0){var d=m.value;t.ctList.push({label:d.gatewayname,value:d.gateway})}}catch(a){c=!0,b=a}finally{try{!u&&f.return&&f.return()}finally{if(c)throw b}}var v=!0,h=!1,y=void 0;try{for(var g,p=i()(a.data.data.cmList);!(v=(g=p.next()).done);v=!0){var k=g.value;t.cmList.push({label:k.gatewayname,value:k.gateway})}}catch(a){h=!0,y=a}finally{try{!v&&p.return&&p.return()}finally{if(h)throw y}}t.modifyData={visible:!0,userName:a.data.data.clientGwScene.userName,id:a.data.data.clientGwScene.id,cmgateway:a.data.data.clientGwScene.cmgateway,cugateway:a.data.data.clientGwScene.cugateway,ctgateway:a.data.data.clientGwScene.ctgateway,memo:a.data.data.clientGwScene.memo}})},submitModify:function(){var a=this;this.postRequest("admin/saveEditClientGwScene",this.modifyData).then(function(t){a.modifyData.visible=!1,a.resAlert(t.data),a.checkData()})},del:function(a){var t=this,e=this;this.$confirm("确认删除【"+a.userName+"】?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/deleteClientGwScene",{id:a.id}).then(function(a){e.resAlert(a.data),e.checkData()})}).catch(function(){})},handleSelectionChange:function(a){this.ids="";var t=!0,e=!1,l=void 0;try{for(var n,r=i()(a);!(t=(n=r.next()).done);t=!0){var s=n.value;this.ids+=s.id+","}}catch(a){e=!0,l=a}finally{try{!t&&r.return&&r.return()}finally{if(e)throw l}}this.ids=this.ids.substr(0,this.ids.length-1)},bulkChange:function(){var a=this;""!==this.ids?this.postRequest("admin/selectBatGateWayScence",{t:""}).then(function(t){a.cmList=[],a.cuList=[],a.ctList=[];var e=!0,l=!1,n=void 0;try{for(var r,s=i()(t.data.data.cmList);!(e=(r=s.next()).done);e=!0){var o=r.value;1===o.status&&a.cmList.push({value:o.gateway,label:o.gatewayname})}}catch(a){l=!0,n=a}finally{try{!e&&s.return&&s.return()}finally{if(l)throw n}}var u=!0,c=!1,b=void 0;try{for(var m,f=i()(t.data.data.cuList);!(u=(m=f.next()).done);u=!0){var d=m.value;1===d.status&&a.cuList.push({value:d.gateway,label:d.gatewayname})}}catch(a){c=!0,b=a}finally{try{!u&&f.return&&f.return()}finally{if(c)throw b}}var v=!0,h=!1,y=void 0;try{for(var g,p=i()(t.data.data.ctList);!(v=(g=p.next()).done);v=!0){var k=g.value;1===k.status&&a.ctList.push({value:k.gateway,label:k.gatewayname})}}catch(a){h=!0,y=a}finally{try{!v&&p.return&&p.return()}finally{if(h)throw y}}a.bulkChangeData.visible=!0}):this.$message.warning("请选择需要修改的记录")},bulkChange2:function(){this.bulkChange2Data.visible=!0},getOper:function(){var a=this;a.beforeList=[],a.afterList=[],this.postRequest("admin/getGatewayBySp",{oper:this.bulkChange2Data.oper}).then(function(t){var e=!0,l=!1,n=void 0;try{for(var r,s=i()(t.data.before);!(e=(r=s.next()).done);e=!0){var o=r.value;a.beforeList.push({value:o.gateway,label:o.gatewayName})}}catch(a){l=!0,n=a}finally{try{!e&&s.return&&s.return()}finally{if(l)throw n}}var u=!0,c=!1,b=void 0;try{for(var m,f=i()(t.data.after);!(u=(m=f.next()).done);u=!0){var d=m.value;a.afterList.push({value:d.gateway,label:d.gatewayName})}}catch(a){c=!0,b=a}finally{try{!u&&f.return&&f.return()}finally{if(c)throw b}}})},submitBulkChange2:function(){var a=this,t=this;this.beforeList.forEach(function(t){t.value===a.bulkChange2Data.beforeBatGW&&(a.bulkChange2Data.beforeBatGWName=t.label)}),this.afterList.forEach(function(t){t.value===a.bulkChange2Data.afterBatGW&&(a.bulkChange2Data.afterBatGWName=t.label)}),this.postRequest("admin/saveBatModifyGwScene",this.bulkChange2Data).then(function(a){t.checkData(),t.bulkChange2Data.visible=!1,t.resAlert(a.data)})},submitBulkChange:function(){var a=this;this.postRequest("admin/saveSelBatGatewayScence",{ids:this.ids,cm:this.bulkChangeData.cm?this.bulkChangeData.cm:0,cu:this.bulkChangeData.cu?this.bulkChangeData.cu:0,ct:this.bulkChangeData.ct?this.bulkChangeData.ct:0}).then(function(t){!0===t.data.success?(a.checkData(),a.bulkChangeData.visible=!1,a.$message.success(t.data.data)):(a.bulkChangeData.visible=!1,a.$message.error("修改失败"))})}}},r={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"container"},[e("el-form",{attrs:{inline:"inline","label-width":"120px"},nativeOn:{keyup:function(t){return"button"in t||!a._k(t.keyCode,"enter",13,t.key,"Enter")?a.checkData(t):null}}},[e("el-form-item",{attrs:{label:"客户账号："}},[e("el-input",{model:{value:a.userName,callback:function(t){a.userName=t},expression:"userName"}})],1),a._v(" "),e("el-form-item",[e("el-button",{staticClass:"fr",attrs:{type:"primary",plain:""},on:{click:a.checkData}},[a._v("查询")])],1)],1),a._v(" "),a.checkIn?e("el-card",[e("el-button",{attrs:{type:"text"},on:{click:a.bulkChange}},[a._v("+选择性批量修改网关")]),a._v(" "),e("el-button",{attrs:{type:"text"},on:{click:a.bulkChange2}},[a._v("+批量修改网关")]),a._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"table",attrs:{border:"",handle:"",data:a.tableData,stripe:""},on:{"selection-change":a.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),a._v(" "),e("el-table-column",{attrs:{label:"序号",width:"50px",prop:"index"}}),a._v(" "),e("el-table-column",{attrs:{width:"150px",label:"操作"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){a.modify(t.row)}}},[a._v("修改")]),a._v(" "),e("el-button",{attrs:{type:"text"},on:{click:function(e){a.del(t.row)}}},[a._v("删除")])]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"userName",label:"客户账号"}}),a._v(" "),e("el-table-column",{attrs:{prop:"cmgatewayname",label:"移动网关"}}),a._v(" "),e("el-table-column",{attrs:{prop:"cugatewayname",label:"联通网关"}}),a._v(" "),e("el-table-column",{attrs:{prop:"ctgatewayname",label:"电信网关"}}),a._v(" "),e("el-table-column",{attrs:{prop:"creater",label:"创建人"}}),a._v(" "),e("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),a._v(" "),e("el-table-column",{attrs:{prop:"modifier",label:"修改人"}}),a._v(" "),e("el-table-column",{attrs:{prop:"modifytime",label:"修改时间"}})],1),a._v(" "),e("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":a.pageNum,"page-size":a.pageSize,layout:"sizes, prev, pager, next, jumper",total:a.sum},on:{"size-change":a.handleSizeChange,"current-change":a.handlePageChange,"update:currentPage":function(t){a.pageNum=t},"update:pageSize":function(t){a.pageSize=t}}}),a._v(" "),e("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[a._v("共"+a._s(a.sum)+"条，")])],1):a._e(),a._v(" "),e("el-dialog",{attrs:{title:"审核路由修改",visible:a.modifyData.visible,width:"500px"},on:{"update:visible":function(t){a.$set(a.modifyData,"visible",t)}}},[e("el-form",{staticStyle:{width:"400px"},attrs:{"label-width":"150px"}},[e("el-form-item",{attrs:{label:"客户账号："}},[e("el-input",{attrs:{disabled:""},model:{value:a.modifyData.userName,callback:function(t){a.$set(a.modifyData,"userName",t)},expression:"modifyData.userName"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"移动网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.modifyData.cmgateway,callback:function(t){a.$set(a.modifyData,"cmgateway",t)},expression:"modifyData.cmgateway"}},a._l(a.cmList,function(a){return e("el-option",{key:a.key,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"联通网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.modifyData.cugateway,callback:function(t){a.$set(a.modifyData,"cugateway",t)},expression:"modifyData.cugateway"}},a._l(a.cuList,function(a){return e("el-option",{key:a.key,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"电信网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.modifyData.ctgateway,callback:function(t){a.$set(a.modifyData,"ctgateway",t)},expression:"modifyData.ctgateway"}},a._l(a.ctList,function(a){return e("el-option",{key:a.key,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"备注："}},[e("el-input",{attrs:{type:"textarea"},model:{value:a.modifyData.memo,callback:function(t){a.$set(a.modifyData,"memo",t)},expression:"modifyData.memo"}})],1)],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.modifyData.visible=!1}}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.submitModify}},[a._v("确认修改")])],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"选择性批量修改网关",visible:a.bulkChangeData.visible,width:"500px"},on:{"update:visible":function(t){a.$set(a.bulkChangeData,"visible",t)}}},[e("el-form",{staticStyle:{width:"400px"},attrs:{"label-width":"150px"}},[e("el-form-item",{attrs:{label:"移动网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.bulkChangeData.cm,callback:function(t){a.$set(a.bulkChangeData,"cm",t)},expression:"bulkChangeData.cm"}},a._l(a.cmList,function(a){return e("el-option",{key:a.key,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"联通网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.bulkChangeData.cu,callback:function(t){a.$set(a.bulkChangeData,"cu",t)},expression:"bulkChangeData.cu"}},a._l(a.cuList,function(a){return e("el-option",{key:a.key,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"电信网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.bulkChangeData.ct,callback:function(t){a.$set(a.bulkChangeData,"ct",t)},expression:"bulkChangeData.ct"}},a._l(a.ctList,function(a){return e("el-option",{key:a.key,attrs:{label:a.label,value:a.value}})}))],1)],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.bulkChangeData.visible=!1}}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.submitBulkChange}},[a._v("确认修改")])],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"批量修改网关",visible:a.bulkChange2Data.visible,width:"500px"},on:{"update:visible":function(t){a.$set(a.bulkChange2Data,"visible",t)}}},[e("el-form",{staticStyle:{width:"400px"},attrs:{"label-width":"150px"}},[e("el-form-item",{attrs:{label:"运营商："}},[e("el-select",{attrs:{filterable:""},on:{change:a.getOper},model:{value:a.bulkChange2Data.oper,callback:function(t){a.$set(a.bulkChange2Data,"oper",t)},expression:"bulkChange2Data.oper"}},a._l(a.operList,function(a,t){return e("el-option",{key:t,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"修改前网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.bulkChange2Data.beforeBatGW,callback:function(t){a.$set(a.bulkChange2Data,"beforeBatGW",t)},expression:"bulkChange2Data.beforeBatGW"}},a._l(a.beforeList,function(a,t){return e("el-option",{key:t,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"修改后网关："}},[e("el-select",{attrs:{filterable:""},model:{value:a.bulkChange2Data.afterBatGW,callback:function(t){a.$set(a.bulkChange2Data,"afterBatGW",t)},expression:"bulkChange2Data.afterBatGW"}},a._l(a.afterList,function(a,t){return e("el-option",{key:t,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),e("el-form-item",{attrs:{label:"备注："}},[e("el-input",{model:{value:a.bulkChange2Data.memo,callback:function(t){a.$set(a.bulkChange2Data,"memo",t)},expression:"bulkChange2Data.memo"}})],1)],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.bulkChange2Data.visible=!1}}},[a._v("取 消")]),a._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:a.submitBulkChange2}},[a._v("确认修改")])],1)],1)],1)},staticRenderFns:[]};var s=e("VU/8")(n,r,!1,function(a){e("bzxs")},"data-v-1b10a4d2",null);t.default=s.exports},bzxs:function(a,t){}});