webpackJsonp([83],{"6LUG":function(e,t){},pXap:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Xxa5"),n=a.n(l),s=a("exGp"),r=a.n(s),i=a("BO1k"),o=a.n(i),p={data:function(){return{userName:"",listSysLogTpye:[],listSysLogTpyed:"",sum:0,pageNum:1,pageSize:30,mudelTpye:[{label:"",value:"全部"},{label:1,value:"系统"},{label:3,value:"客户"}],mudelTpyed:"",content:"",fdate:new Date(new Date((new Date).toLocaleDateString()).getTime()),tdate:"",tableData:[],index:0,typeID:""}},methods:{succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){var e=this,t=this;this.tableData=[],this.postRequest("admin/listSysLog",{userName:this.userName,typeID:this.typeID,content:this.content,callMethodPath:this.listSysLogTpyed,ipaddr:this.ipaddr,moduleType:this.mudelTpyed,fdate:this.formatDate2(this.fdate),tdate:this.tdate,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(a){t.tableData=[],e.index=Number(a.data.data.page.pageNum-1)*Number(a.data.data.page.pageSize)+1,t.sum=a.data.data.page.totalCount;var l=!0,n=!1,s=void 0;try{for(var r,i=o()(a.data.data.data.list);!(l=(r=i.next()).done);l=!0){var p=r.value;t.tableData.push({id:p.id,index:e.index,userName:p.userName,typeIDCn:p.typeIDCn,typeID:p.typeID,content:p.content,callMethodPath:p.callMethodPath,ipaddr:p.ipaddr,moduleType:"1"==p.moduleType?"系统":"客户",createtime:p.createtime,creatorUserName:p.creatorUserName}),t.index++}}catch(e){n=!0,s=e}finally{try{!l&&i.return&&i.return()}finally{if(n)throw s}}})},getlistSysLogTpye:function(){var e=this;return r()(n.a.mark(function t(){var a,l,s,r,i,p,c;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.listSysLogTpye=[],t.next=3,e.postRequest("admin/listSysLogTpye",{token:""});case 3:for(a=t.sent,console.log(a),l=!0,s=!1,r=void 0,t.prev=8,i=o()(a.data.data);!(l=(p=i.next()).done);l=!0)c=p.value,e.listSysLogTpye.push({id:c.id,codeNameCn:c.codeNameCn});t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),s=!0,r=t.t0;case 16:t.prev=16,t.prev=17,!l&&i.return&&i.return();case 19:if(t.prev=19,!s){t.next=22;break}throw r;case 22:return t.finish(19);case 23:return t.finish(16);case 24:e.listSysLogTpye.unshift({id:"",codeNameCn:"所有"});case 25:case"end":return t.stop()}},t,e,[[8,12,16,24],[17,,19,23]])}))()}},mounted:function(){this.getlistSysLogTpye()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{attrs:{"label-width":"120px",inline:"inline"}},[a("el-form-item",{attrs:{label:"操作用户："}},[a("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日志类型："}},[a("el-select",{model:{value:e.listSysLogTpyed,callback:function(t){e.listSysLogTpyed=t},expression:"listSysLogTpyed"}},e._l(e.listSysLogTpye,function(e,t){return a("el-option",{key:t,attrs:{label:e.codeNameCn,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"模块类型："}},[a("el-select",{model:{value:e.mudelTpyed,callback:function(t){e.mudelTpyed=t},expression:"mudelTpyed"}},e._l(e.mudelTpye,function(e,t){return a("el-option",{key:t,attrs:{label:e.value,value:e.label}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"日志内容："}},[a("el-input",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{attrs:{type:"datetime"},model:{value:e.fdate,callback:function(t){e.fdate=t},expression:"fdate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作时间"}},[a("el-date-picker",{attrs:{type:"datetime"},model:{value:e.tdate,callback:function(t){e.tdate=t},expression:"tdate"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),a("el-card",[a("el-table",{ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",prop:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeIDCn",label:"日志类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"日志内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"callMethodPath",label:"调用路径"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ipaddr",label:"请求地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"moduleType",label:"模块类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"creatorUserName",label:"操作用户"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"操作时间"}})],1),e._v(" "),a("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":e.pageSize,total:e.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t}}}),e._v(" "),a("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(p,c,!1,function(e){a("6LUG")},"data-v-2972d8f9",null);t.default=d.exports}});