webpackJsonp([97],{"+zXM":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("BO1k"),i=t.n(r),n={name:"admin_fxbglb",data:function(){return{options:[],gatewayList:[],remindGatewayError:{gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",id:""},rules:{sendErrorCount:[{required:!0,message:"不能为空",trigger:"blur"}],mailUrl:[{required:!0,message:"不能为空",trigger:"blur"}]},formLabelWidth:"120px",dialogFormVisible:!1,modifyDataVisible:!1,gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",status:"",createUserName:"",createDate:"",index:0,pageNum:1,pageSize:30,sum:0,tableData:[],checkIn:!0,loading:!1}},methods:{modifyData:function(a){this.remindGatewayError={};var e=this;this.modifyDataVisible=!0,this.remindGatewayError.gateway=a.gateway,this.remindGatewayError.gatewayName=a.gatewayName,this.remindGatewayError.sendErrorCount=a.sendErrorCount,this.remindGatewayError.mailUrl=a.mailUrl,this.postRequest("admin/updateRemindGatewayError",{gateway:a.gateway}).then(function(a){e.remindGatewayError.id=a.data.data.remindGatewayError.id})},deleteDate:function(a){var e=this,t=this;this.$confirm("此操作将删除通道提交失败："+a.gatewayName+" 的提醒 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("admin/deleteRemindGatewayError",{id:a.id}).then(function(a){a.data.success?(e.succeed(a.data.data),e.getData()):e.failed(a.data.data)})}).catch(function(){})},changeStatus:function(a){var e=this;this.$confirm("此操作将禁用网关："+a.gatewayName+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.postRequest("admin/changeGatewayErrorStatus",{id:a.id,status:1===a.status?0:1}).then(function(a){if(a.data.success){e.succeed(a.data.data),e.getData();var t=!0,r=!1,n=void 0;try{for(var o,l=i()(e.tableData);!(t=(o=l.next()).done);t=!0){o.value;return}}catch(a){r=!0,n=a}finally{try{!t&&l.return&&l.return()}finally{if(r)throw n}}}else e.failed(a.data.data)})}).catch(function(){})},submitForm:function(a){var e=this;this.$refs[a].validate(function(a){if(!a)return!1;e.modifyDataVisible=!1;var t=e;e.postRequest("admin/saveUpdateRemindGatewayError",{remindGatewayError:e.remindGatewayError}).then(function(a){a.data.success?(t.succeed(a.data.data),t.getData()):t.failed(a.data.data)})})},resetForm:function(a){this.modifyDataVisible=!1},succeed:function(a){this.$message({message:a,type:"success"})},failed:function(a){this.$message.error(a)},saveAdd:function(a){var e=this;this.$refs[a].validate(function(a){if(!a)return!1;e.dialogFormVisible=!1;var t=!0,r=!1,n=void 0;try{for(var o,l=i()(e.gatewayList);!(t=(o=l.next()).done);t=!0){var s=o.value;e.remindGatewayError.gatewayName===s.gatewayname&&(e.remindGatewayError.gateway=s.gateway)}}catch(a){r=!0,n=a}finally{try{!t&&l.return&&l.return()}finally{if(r)throw n}}var d=e;e.postRequest("admin/saveAddRemindGatewayError",{remindGatewayError:e.remindGatewayError}).then(function(a){a.data.success?(d.succeed(a.data.data),d.getData()):d.failed(a.data.resultMsg)}),e.remindGatewayError={gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",id:""}})},cancelAdd:function(a){this.dialogFormVisible=!1,this.remindGatewayError={gateway:"",gatewayName:"",sendErrorCount:"",mailUrl:"",id:""}},addRemind:function(){this.dialogFormVisible=!0;var a=this;this.postRequest("admin/addRemindGatewayError",null).then(function(e){a.gatewayList=e.data.data.gatewayList;var t=!0,r=!1,n=void 0;try{for(var o,l=i()(e.data.data.gatewayList);!(t=(o=l.next()).done);t=!0){var s=o.value;s.gatewayname&&a.options.push({value:s.gatewayname,label:s.gateway+"_"+s.gatewayname,index:a.index}),a.index++}}catch(a){r=!0,n=a}finally{try{!t&&l.return&&l.return()}finally{if(r)throw n}}})},handleSizeChange:function(){this.getData()},handlePageChange:function(){this.getData()},getData:function(){var a=this;this.tableData=[],this.loading=!0;var e=this;this.postRequest("admin/listRemindGatewayError",{gateway:this.gateway,gatewayName:this.gatewayName,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){e.tableData=[],e.loading=!1,a.index=Number(t.data.data.page.pageNum-1)*Number(t.data.data.page.pageSize)+1,e.sum=t.data.data.page.totalCount;var r=!0,n=!1,o=void 0;try{for(var l,s=i()(t.data.data.rublist);!(r=(l=s.next()).done);r=!0){var d=l.value;e.tableData.push({index:e.index,gateway:d.gateway,gatewayName:d.gatewayName,sendErrorCount:d.sendErrorCount,mailUrl:d.mailUrl,status:d.status,statusCn:0===d.status?"启用":"禁用",createUserName:d.createUserName,createDate:d.createDate,createAccountID:d.createAccountID,id:d.id}),e.index++}}catch(a){n=!0,o=a}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}})},cancel:function(){}},mounted:function(){this.getData()}},o={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"container"},[t("el-button",{attrs:{type:"text"},on:{click:a.addRemind}},[a._v("+添加通道提交失败提醒")]),a._v(" "),t("el-dialog",{attrs:{title:"添加通道提交失败提醒",visible:a.dialogFormVisible},on:{"update:visible":function(e){a.dialogFormVisible=e}}},[t("el-form",{ref:"remindGatewayError",attrs:{model:a.remindGatewayError,rules:a.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"通道名称："}},[t("el-select",{model:{value:a.remindGatewayError.gatewayName,callback:function(e){a.$set(a.remindGatewayError,"gatewayName",e)},expression:"remindGatewayError.gatewayName"}},a._l(a.options,function(a){return t("el-option",{key:a.index,attrs:{label:a.label,value:a.value}})}))],1),a._v(" "),t("el-form-item",{attrs:{label:"提醒阈值：","label-width":a.formLabelWidth,prop:"sendErrorCount"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:a.remindGatewayError.sendErrorCount,callback:function(e){a.$set(a.remindGatewayError,"sendErrorCount",e)},expression:"remindGatewayError.sendErrorCount"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"提醒邮箱：","label-width":a.formLabelWidth,prop:"mailUrl"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"邮箱之间请用英文逗号分割"},model:{value:a.remindGatewayError.mailUrl,callback:function(e){a.$set(a.remindGatewayError,"mailUrl",e)},expression:"remindGatewayError.mailUrl"}})],1)],1),a._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){a.saveAdd("remindGatewayError")}}},[a._v("保存")]),a._v(" "),t("el-button",{on:{click:function(e){a.cancelAdd("remindGatewayError")}}},[a._v("取消")])],1)],1),a._v(" "),t("el-dialog",{attrs:{title:"添加通道提交失败提醒",visible:a.modifyDataVisible},on:{"update:visible":function(e){a.modifyDataVisible=e}}},[t("el-form",{ref:"remindGatewayError",attrs:{model:a.remindGatewayError,rules:a.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"通道名称："}},[t("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:a.remindGatewayError.gatewayName,callback:function(e){a.$set(a.remindGatewayError,"gatewayName",e)},expression:"remindGatewayError.gatewayName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"提醒阈值：","label-width":a.formLabelWidth,prop:"sendErrorCount"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:a.remindGatewayError.sendErrorCount,callback:function(e){a.$set(a.remindGatewayError,"sendErrorCount",e)},expression:"remindGatewayError.sendErrorCount"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"提醒邮箱：","label-width":a.formLabelWidth,prop:"mailUrl"}},[t("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"邮箱之间请用英文逗号分割"},model:{value:a.remindGatewayError.mailUrl,callback:function(e){a.$set(a.remindGatewayError,"mailUrl",e)},expression:"remindGatewayError.mailUrl"}})],1)],1),a._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){a.submitForm("remindGatewayError")}}},[a._v("保存")]),a._v(" "),t("el-button",{on:{click:function(e){a.resetForm("remindGatewayError")}}},[a._v("取消")])],1)],1),a._v(" "),t("el-form",{attrs:{"label-width":"120px",inline:"inline"},nativeOn:{keyup:function(e){return"button"in e||!a._k(e.keyCode,"enter",13,e.key,"Enter")?a.checkData(e):null}}},[t("el-form-item",{attrs:{label:"通道名："}},[t("el-input",{model:{value:a.gatewayName,callback:function(e){a.gatewayName=e},expression:"gatewayName"}})],1),a._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:a.getData}},[a._v("查询")])],1)],1),a._v(" "),a.checkIn?t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:a.tableData,stripe:""}},[t("el-table-column",{attrs:{label:"序号",prop:"index"}}),a._v(" "),t("el-table-column",{attrs:{prop:"oprations",label:"操作",width:"150"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){a.changeStatus(e.row)}}},[a._v(a._s(e.row.status?"启用":"禁用"))]),a._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){a.modifyData(e.row)}}},[a._v("修改信息")]),a._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){a.deleteDate(e.row)}}},[a._v("删除")])]}}])}),a._v(" "),t("el-table-column",{attrs:{prop:"gateway",label:"通道编号"}}),a._v(" "),t("el-table-column",{attrs:{prop:"gatewayName",label:"通道名称"}}),a._v(" "),t("el-table-column",{attrs:{prop:"sendErrorCount",label:"提交失败提醒阈值\n"}}),a._v(" "),t("el-table-column",{attrs:{prop:"mailUrl",label:"邮箱地址"}}),a._v(" "),t("el-table-column",{attrs:{prop:"statusCn",label:"状态"}}),a._v(" "),t("el-table-column",{attrs:{prop:"createUserName",label:"创建人"}}),a._v(" "),t("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}})],1),a._v(" "),t("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":a.pageNum,"page-size":a.pageSize,total:a.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":a.handleSizeChange,"current-change":a.handlePageChange,"update:currentPage":function(e){a.pageNum=e},"update:pageSize":function(e){a.pageSize=e}}}),a._v(" "),t("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[a._v("共"+a._s(a.sum)+"条，")])],1):a._e()],1)},staticRenderFns:[]};var l=t("VU/8")(n,o,!1,function(a){t("hAhk")},"data-v-187e09c2",null);e.default=l.exports},hAhk:function(a,e){}});