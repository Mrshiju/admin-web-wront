webpackJsonp([23],{GF4k:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t={data:function(){return{loading:!1,isActive:!1,errorMsg:"lalala",ruleForm:{username:"",password:"",baseUrl:localStorage.base?localStorage.base:""},baseUrlList:[{label:"营销账号",value:"yxBaseUrl"}],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],baseUrl:[{required:!0,message:"请选择账号类型",trigger:"change"}]}}},methods:{getBaseUrl:function(e){localStorage.setItem("base",e)},submitForm:function(e){var s=this,r=this;this.$refs[e].validate(function(e){if(!e)return!1;s.loading=!0,s.$axios.get("requestUrl.json").then(function(e){r.loading=!1,sessionStorage.base=e.data[localStorage.base],r.postRequest("web/login",{userName:s.ruleForm.username,password:s.ruleForm.password,source:"admin"}).then(function(e){if(r.loading=!1,!0===e.data.success){sessionStorage.setItem("admin_token",e.data.data),sessionStorage.setItem("saleName",r.ruleForm.username),r.loading=!0;r.postRequest("admin/loginAfter",{menuName:"admin_dashboard_show"}).then(function(e){if(e.data.success){var s=e.data.data.menuName,t=e.data.data.menuNameCn;r.$router.push(s),sessionStorage.setItem("mainPage","/"+s),sessionStorage.setItem("mainTitle",t)}})}else r.isActive=!0,r.errorMsg=e.data.resultMsg})})})}}},a={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"login-wrap"},[r("div",{staticClass:"ms-login"},[r("div",{staticClass:"ms-title"},[e._v("后台管理系统")]),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"ms-content",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0px"}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"username"},model:{value:e.ruleForm.username,callback:function(s){e.$set(e.ruleForm,"username",s)},expression:"ruleForm.username"}},[r("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-people"},slot:"prepend"})],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"password",autocomplete:"new-password"}},[r("el-input",{attrs:{type:"password",placeholder:"password",autocomplete:"new-password"},nativeOn:{keyup:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;e.submitForm("ruleForm")}},model:{value:e.ruleForm.password,callback:function(s){e.$set(e.ruleForm,"password",s)},expression:"ruleForm.password"}},[r("el-button",{attrs:{slot:"prepend",icon:"el-icon-lx-lock"},slot:"prepend"})],1)],1),e._v(" "),r("el-form-item",{attrs:{prop:"baseUrl"}},[r("el-button",{attrs:{icon:"el-icon-setting"}}),e._v(" "),r("el-select",{on:{change:function(s){e.getBaseUrl(e.ruleForm.baseUrl)}},model:{value:e.ruleForm.baseUrl,callback:function(s){e.$set(e.ruleForm,"baseUrl",s)},expression:"ruleForm.baseUrl"}},e._l(e.baseUrlList,function(e,s){return r("el-option",{key:s,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("div",{staticClass:"login-btn"},[r("el-button",{attrs:{type:"primary","element-loading-background":"rgba(0, 0, 0, 0.6)",disabled:e.loading,loading:e.loading},on:{click:function(s){e.submitForm("ruleForm")}}},[e._v(e._s(!0!==e.loading?"登录":"登录中..."))])],1),e._v(" "),r("p",{staticClass:"login-tips",class:{active:e.isActive}},[e._v("提示："+e._s(e.errorMsg))])],1)],1)])},staticRenderFns:[]};var o=r("VU/8")(t,a,!1,function(e){r("YLNf")},"data-v-a70f2946",null);s.default=o.exports},YLNf:function(e,s){}});