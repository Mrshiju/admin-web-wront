webpackJsonp([104],{ZEQ4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),s=a.n(n),u={data:function(){return{submitSum:0,submitSucSum:0,reportSucSum:0,reportUnknowSum:0,userName:"",agentName:"",month:new Date,isFirst:!1,index:0,pageNum:1,pageSize:30,sum:0,sumPage:0,tableData:[],checkIn:!0,loading:!1}},methods:{succeed:function(){this.$message({message:"导出成功",type:"success"})},failed:function(){this.$message.error("导出失败")},exportData:function(){var e=this;this.postRequest("/admin/exportCustomerFeeMonthReport",{userName:this.userName,agentName:this.agentName,month:this.formatDate(this.month),isFirst:this.isFirst,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){t.data.success?e.succeed():e.failed()})},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){var e=this;this.tableData=[],this.checkIn=!0,this.loading=!0;var t=this;this.postRequest("/admin/listCustomerFeeMonthReport",{userName:this.userName,agentName:this.agentName,month:this.formatDate(this.month),isFirst:this.isFirst,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(a){t.tableData=[],t.loading=!1,e.tableData=[],e.index=Number(a.data.data.page.pageNum-1)*Number(a.data.data.page.pageSize)+1,t.sum=a.data.data.page.totalCount,t.submitSum=a.data.data.commonSum.submitSum,t.submitSucSum=a.data.data.commonSum.submitSucSum,t.reportSucSum=a.data.data.commonSum.reportSucSum,t.reportUnknowSum=a.data.data.commonSum.reportUnknowSum,t.sumPage=Math.ceil(a.data.data.page.totalCount/t.pageSize);var n=!0,u=!1,o=void 0;try{for(var l,r=s()(a.data.data.data);!(n=(l=r.next()).done);n=!0){var i=l.value;t.tableData.push({index:t.index,id:i.id,userName:i.userName,agentName:i.agentName,customerSubmitSum:i.customerSubmitSum+"条/"+(0!=i.customerSubmitSumMoney?i.customerSubmitSumMoney/1e4:0)+"元",gatewaySubmitSum:i.gatewaySubmitSum,gatewaySubmitSuccess:i.gatewaySubmitSuccess+"条/"+(0!=i.gateSubSuccMoney?i.gateSubSuccMoney/1e4:0)+"元",gatewaySubmitFailed:i.gatewaySubmitFailed+"条/"+(0!=i.gateSubFailMoney?i.gateSubFailMoney/1e4:0)+"元",gatewaySubmitSuccessRate:(100*i.gatewaySubmitSuccessRate).toFixed(4)+"%",gatewayReportSum:i.gatewayReportSum,gatewayReportSuccess:i.gatewayReportSuccess+"条/"+(0!=i.gateReportSuccMoney?i.gateReportSuccMoney/1e4:0)+"元",gatewayReportFailed:i.gatewayReportFailed+"条/"+(0!=i.gateReportFailMoney?i.gateReportFailMoney/1e4:0)+"元",platSubmitFailed:i.customerSubmitSum-i.gatewaySubmitSum,gatewayReportUnknow:i.gatewayReportUnknow+"条/"+(0!=i.gateReportUnknowMoney?i.gateReportUnknowMoney/1e4:0)+"元",gatewayReportSuccessRate:(100*i.gatewayReportSuccessRate).toFixed(4)+"%",gatewayReportReturnRate:(100*i.gatewayReportReturnRate).toFixed(4)+"%",statMonth:i.statMonth,created:i.created,updated:i.updated}),t.index++}}catch(e){u=!0,o=e}finally{try{!n&&r.return&&r.return()}finally{if(u)throw o}}})},cancel:function(){}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{attrs:{"label-width":"120px",inline:"inline"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.checkData(t):null}}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理商"}},[a("el-input",{model:{value:e.agentName,callback:function(t){e.agentName=t},expression:"agentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"按月"}},[a("el-date-picker",{attrs:{type:"month",placeholder:"选择月"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),e.checkIn?a("el-card",[a("el-button",{attrs:{type:"text"},on:{click:e.exportData}},[e._v("+导出")]),e._v(" "),a("div",{staticClass:"dataWrap"},[a("span",{staticClass:"count"},[e._v("消费数：\n      "),a("span",{staticClass:"data"},[e._v(e._s(e.submitSum))])]),e._v(" "),a("span",{staticClass:"count"},[e._v("提交成功数：\n      "),a("span",{staticClass:"data"},[e._v(e._s(e.submitSucSum))])]),e._v(" "),a("span",{staticClass:"count"},[e._v("报告成功数：\n      "),a("span",{staticClass:"data"},[e._v(e._s(e.reportSucSum))])]),e._v(" "),a("span",{staticClass:"count"},[e._v("报告未知数：\n      "),a("span",{staticClass:"data"},[e._v(e._s(e.reportUnknowSum))])])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"序号",prop:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"代理商"}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerSubmitSum",label:"消费数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"platSubmitFailed",label:"平台提交失败"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitSum",label:"网关提交数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitSuccess",label:"提交成功数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitFailed",label:"提交失败数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewaySubmitSuccessRate",label:"提交成功率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportSum",label:"网关报告数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportSuccess",label:"报告成功"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportFailed",label:"报告失败"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportUnknow",label:"报告未知"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportSuccessRate",label:"报告成功率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gatewayReportReturnRate",label:"报告返回率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statMonth",label:"统计时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"created",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updated",label:"更新时间"}})],1),e._v(" "),a("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":e.pageSize,total:e.sum,layout:"sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(t){e.pageNum=t},"update:pageSize":function(t){e.pageSize=t}}}),e._v(" "),a("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1):e._e()],1)},staticRenderFns:[]};var l=a("VU/8")(u,o,!1,function(e){a("nZML")},"data-v-099eb8ac",null);t.default=l.exports},nZML:function(e,t){}});