webpackJsonp([54],{"0UJO":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("BO1k"),n=t.n(l),o={name:"A",data:function(){return{sum:0,index:0,pageSize:30,pageNum:1,checkIn:!1,loading:!1,tableData:[],userName:"",modifyData:{visible:!1,accountID:"",userName:"",saleName:"",agentName:"SYS",rank:""},saleNameOpt:[],rankOpt:[{label:0},{label:1},{label:2},{label:3}]}},methods:{handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){var e=this;this.tableData=[],this.checkIn=!0,this.loading=!0;var a=this;this.postRequest("admin/listSubAccount",{accountID:this.$route.query.accountID,userName:this.userName}).then(function(t){a.loading=!1,e.index=Number(t.data.data.page.pageNum-1)*Number(t.data.data.page.pageSize)+1,a.sum=t.data.data.page.totalCount;var l=!0,o=!1,r=void 0;try{for(var i,s=n()(t.data.data.data);!(l=(i=s.next()).done);l=!0){var c=i.value;a.tableData.push({index:a.index,accountID:c.accountID,accountType:c.accountType,accountTypeCn:1===c.accountType?"行业":2===c.accountType?"营销":"未知",userName:c.userName,code:c.code,pcnName:c.pcnName,saleName:c.saleName,agentName:c.agentName,balance:c.userBalance.balance,nickName:c.userDetail.nickName,mobile:c.userDetail.mobile,companyName:c.userDetail.companyName,modifyUserName:c.userDetail.modifyUserName,modifytimes:c.userDetail.modifytimes,creatorUserName:c.userDetail.creatorUserName,created:c.userDetail.created,cnStatus:c.cnStatus}),a.index++}}catch(e){o=!0,r=e}finally{try{!l&&s.return&&s.return()}finally{if(o)throw r}}})},modify:function(e){var a=this;this.saleNameOpt=[],this.postRequest("admin/listFinanaceUpdateParams",{accountID:e.accountID}).then(function(e){var t=!0,l=!1,o=void 0;try{for(var r,i=n()(e.data.data.empList);!(t=(r=i.next()).done);t=!0){var s=r.value;a.saleNameOpt.push({label:s.userName+"("+s.nickName+")",value:s.userName})}}catch(e){l=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(l)throw o}}a.modifyData={visible:!0,accountID:e.data.data.customer.accountID,userName:e.data.data.customer.userName,saleName:e.data.data.customer.saleName,agentName:"SYS",rank:e.data.data.customer.rank}})},submitModify:function(){var e=this;this.postRequest("admin/saveFinanaceUpdateParams",this.modifyData).then(function(a){e.checkData(),e.modifyData.visible=!1,e.resAlert(a.data)})},reset:function(e){var a=this;this.$confirm("确认重置【"+e.userName+"】的密码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.postRequest("admin/resetPassword",{accountID:e.accountID}).then(function(e){a.checkData(),!0===e.data.success?a.$notify({title:"重置密码成功",message:e.data.message,type:"success",duration:0}):a.$message.error("重置密码失败")})}).catch(function(){})}},beforeRouteEnter:function(e,a,t){t(function(e){e.accountID=e.$route.query.accountID,e.checkData()})}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("el-form",{attrs:{inline:"inline","label-width":"120px"},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.checkData(a):null}}},[t("el-form-item",{attrs:{label:"客户账号："}},[t("el-input",{model:{value:e.userName,callback:function(a){e.userName=a},expression:"userName"}})],1),e._v(" "),t("el-form-item",[t("el-button",{staticClass:"fr",attrs:{type:"primary",plain:""},on:{click:e.checkData}},[e._v("查询")])],1)],1),e._v(" "),e.checkIn?t("el-card",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{border:"",data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{label:"序号",width:"50px",prop:"index"}}),e._v(" "),t("el-table-column",{attrs:{width:"150px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.modify(a.row)}}},[e._v("修改参数")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.reset(a.row)}}},[e._v("重置密码")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"userName",label:"客户账号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"code",label:"特服号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"pcnName",label:"主账号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"saleName",label:"所属销售"}}),e._v(" "),t("el-table-column",{attrs:{prop:"agentName",label:"所属代理"}}),e._v(" "),t("el-table-column",{attrs:{prop:"balance",label:"余额(条)"}}),e._v(" "),t("el-table-column",{attrs:{label:"联系信息",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.nickName?t("div",[e._v("联系人："+e._s(a.row.nickName))]):e._e(),e._v(" "),a.row.mobile?t("div",[e._v("手机："+e._s(a.row.mobile))]):e._e(),e._v(" "),a.row.companyName?t("div",[e._v("公司："+e._s(a.row.companyName))]):e._e()]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"modifyUserName",label:"修改人"}}),e._v(" "),t("el-table-column",{attrs:{prop:"modifytimes",label:"修改时间"}}),e._v(" "),t("el-table-column",{attrs:{prop:"creatorUserName",label:"创建人"}}),e._v(" "),t("el-table-column",{attrs:{prop:"created",label:"创建时间"}}),e._v(" "),t("el-table-column",{attrs:{prop:"accountTypeCn",label:"账号类型"}}),e._v(" "),t("el-table-column",{attrs:{prop:"cnStatus",label:"状态"}})],1),e._v(" "),t("el-pagination",{staticClass:"fr",staticStyle:{margin:"10px 0"},attrs:{"current-page":e.pageNum,"page-size":e.pageSize,layout:"sizes, prev, pager, next, jumper",total:e.sum},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange,"update:currentPage":function(a){e.pageNum=a},"update:pageSize":function(a){e.pageSize=a}}}),e._v(" "),t("span",{staticClass:"fr",staticStyle:{"padding-top":"15px","font-size":"14px"}},[e._v("共"+e._s(e.sum)+"条，")])],1):e._e(),e._v(" "),t("el-dialog",{ref:"addClientForm",attrs:{title:"终端客户修改参数",visible:e.modifyData.visible,width:"500px"},on:{"update:visible":function(a){e.$set(e.modifyData,"visible",a)}}},[t("el-form",{ref:"modifyData",staticStyle:{width:"400px"},attrs:{model:e.modifyData,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"客户账号：",prop:"userName"}},[t("el-input",{attrs:{disabled:""},model:{value:e.modifyData.userName,callback:function(a){e.$set(e.modifyData,"userName",a)},expression:"modifyData.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"所属销售：",prop:"saleName"}},[t("el-select",{attrs:{filterable:""},model:{value:e.modifyData.saleName,callback:function(a){e.$set(e.modifyData,"saleName",a)},expression:"modifyData.saleName"}},e._l(e.saleNameOpt,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"客户等级："}},[t("el-select",{attrs:{filterable:""},model:{value:e.modifyData.rank,callback:function(a){e.$set(e.modifyData,"rank",a)},expression:"modifyData.rank"}},e._l(e.rankOpt,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.modifyData.visible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.submitModify}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var i=t("VU/8")(o,r,!1,function(e){t("QXYb")},"data-v-5f1f14f4",null);a.default=i.exports},QXYb:function(e,a){}});