webpackJsonp([63],{fun9:function(e,t){},pLtg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=a("BO1k"),n=a.n(d),i={data:function(){return{deptList:[{label:"部门列表",deptName:"部门列表",level:0,seq:0,children:[],pdeptName:""}],defaultProps:{children:"children",label:"label"},form:{id:"",deptName:"",pdeptName:"",seq:"",note:""},menuFlag:!1,formLabelWidth:"120px",rules:{deptName:[{required:!0,message:"不能为空",trigger:"blur"}],seq:[{required:!0,message:"不能为空",trigger:"blur"}]},delNodeFlag:!0,parent:"",nodes:0}},methods:{handleNodeClick:function(e){this.menuFlag=!0,this.form={id:e.id,deptName:e.deptName,pdeptName:e.pdeptName,seq:e.seq,note:e.note}},append:function(e){var t={label:"新增item",deptName:"新增item",level:e.level+1,pdeptName:e.deptName,info:"",id:" ",zid:"",node:e.id,seq:"",children:[]};this.parent=e.deptName,e.children||this.$set(e,"children",[]),e.children.push(t)},remove:function(e,t){var a=this,d=e.parent,n=d.data.children||d.data,i=n.findIndex(function(e){return e.id===t.id});n.splice(i,1);var l=t.id;this.postRequest("admin/deleteDept",{deptID:l}).then(function(e){e.data.success?(a.succeed(e.data.message),a.checkData()):a.failed(e.data.message)})},saveMenu:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return!1;t.menuFlag=!1;var d=a.form.deptName+","+("部门列表"==a.parent?"":a.parent)+","+a.form.note+","+a.form.seq+","+a.form.id+",";t.postRequest("admin/saveAddDept",{params:d}).then(function(e){e.data.success&&a.checkData(),a.resAlert(e.data)})})},succeed:function(e){this.$message({message:e,type:"success"})},failed:function(e){this.$message.error(e)},handleSizeChange:function(){this.checkData()},handlePageChange:function(){this.checkData()},checkData:function(){var e=this,t=[],a=[];this.postRequest("admin/listDept",{}).then(function(d){e.deptList=[{label:"部门列表",deptName:"部门列表",level:0,seq:0,children:[],pdeptName:""}];var i=!0,l=!1,r=void 0;try{for(var s,o=n()(d.data.data.deptList);!(i=(s=o.next()).done);i=!0){var p=s.value;""==p.pdeptName?t.push({label:p.deptName,deptName:p.deptName,id:p.id,seq:p.seq,note:p.note}):a.push({label:p.deptName,deptName:p.deptName,id:p.id,seq:p.seq,note:p.note,pdeptName:p.pdeptName})}}catch(e){l=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(l)throw r}}var c=!0,m=!1,u=void 0;try{for(var f,h=n()(t);!(c=(f=h.next()).done);c=!0){var v=f.value;e.deptList[0].children.push({label:v.deptName,deptName:v.deptName,id:v.id,pdeptId:v.pdeptId,seq:v.seq,zid:v.zid,zpid:v.zpid,note:v.note,children:[],pdeptName:v.pdeptName})}}catch(e){m=!0,u=e}finally{try{!c&&h.return&&h.return()}finally{if(m)throw u}}var N=!0,b=!1,g=void 0;try{for(var y,q=n()(e.deptList[0].children);!(N=(y=q.next()).done);N=!0){var _=y.value,k=!0,x=!1,F=void 0;try{for(var w,C=n()(a);!(k=(w=C.next()).done);k=!0){var z=w.value;z.pdeptName==_.deptName&&_.children.push({label:z.deptName,deptName:z.deptName,id:z.id,pdeptId:z.pdeptId,seq:z.seq,zid:z.zid,zpid:z.zpid,note:z.note,children:[]})}}catch(e){x=!0,F=e}finally{try{!k&&C.return&&C.return()}finally{if(x)throw F}}}}catch(e){b=!0,g=e}finally{try{!N&&q.return&&q.return()}finally{if(b)throw g}}})},cancel:function(){},modify:function(){this.delNodeFlag=!this.delNodeFlag},nodedele:function(e,t,a){}},mounted:function(){this.checkData()}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"sideBar",attrs:{width:"25%",heiht:"100%"}},[a("el-tree",{attrs:{data:e.deptList,props:e.defaultProps,"default-expand-all":"","highlight-current":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var d=t.node,n=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(d.label))]),e._v(" "),e.delNodeFlag||3==d.level?e._e():a("span",[a("i",{staticClass:"el-icon-plus blue",attrs:{type:"text",size:"mini"},on:{click:function(){return e.append(n)}}})]),e._v(" "),e.delNodeFlag?e._e():a("span",[a("i",{staticClass:"el-icon-delete red",attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(d,n)}}})])])}}])})],1),e._v(" "),a("div",{staticClass:"content"},[e.menuFlag?a("div",{staticClass:"formWrap",attrs:{width:"75%",heiht:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"部门名称：","label-width":e.formLabelWidth,prop:"deptName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.delNodeFlag},model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"序号：","label-width":e.formLabelWidth,prop:"seq"}},[a("el-input",{attrs:{autocomplete:"off",disabled:e.delNodeFlag},model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注：","label-width":e.formLabelWidth,prop:"note"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off",disabled:e.delNodeFlag},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.delNodeFlag,expression:"!delNodeFlag"}],staticClass:"btn",attrs:{type:"primary"},on:{click:function(t){e.saveMenu("form")}}},[e._v("更新菜单")])],1):e._e()]),e._v(" "),a("div",{staticClass:"footer"},[a("div",{staticClass:"buttonWrap"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.modify("form")}}},[e._v(e._s(e.delNodeFlag?"编辑":"退出编辑")+"\n            ")]),e._v(" "),a("el-button",{on:{click:function(t){e.close("form")}}},[e._v("关闭")])],1)])])},staticRenderFns:[]};var r=a("VU/8")(i,l,!1,function(e){a("fun9")},"data-v-54859820",null);t.default=r.exports}});